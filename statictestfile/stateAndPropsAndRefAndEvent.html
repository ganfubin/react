<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<title>Document</title>
	<script src="reactCommonJs/react-with-addons.js"></script>
	<script src="reactCommonJs/react-dom.js"></script>
	<script src="reactCommonJs/browser.min.js"></script>
	<script src="reactCommonJs/jquery.js"></script>
	<script type="text/babel">
	var FromApp= React.createClass({
		getInitialState:function() {
		    return {
		          defaultStateInputValue:"input表单state默认值",
		          defaultStateSelectValue:"A",
		          defaultStateRadioValue:"radio-b",
		          defaultStateCheckBoxValue:[],
		          defaultStateTextareaValue:"textarea域默认值"
		    };
		},

		handleInputRadio:function(ev){
			this.setState({
				defaultStateRadioValue:ev.target.value
			});
		},
		handleInputCheckBox:function(ev){
			var checkValues=this.state.defaultStateCheckBoxValue.slice();/*创建数组并复制*/
			var newVal=ev.target.value;
			var indexEle=checkValues.indexOf(newVal);
			if(indexEle==-1){
				checkValues.push(newVal);//没找到就添加
			}else{
				checkValues.splice(indexEle,1);//找到了就从该位置删除
			}
			this.setState({
                                        defaultStateCheckBoxValue:checkValues
			});
		},
                          submitHandle:function(ev){
                          	ev.preventDefault();
                          	var formData={
                          		inputTextValue:this.refs.inputTextRef.value,
                          		inputSelecValue:this.refs.inputSelectRef.value,
                          		inputRadioValue:this.state.defaultStateRadioValue,
                          		inputCheckBoxValue:this.state.defaultStateCheckBoxValue,
                          		textareaValue:this.refs.inputTextareaRef.value,
                          	}
                          	console.log(formData);
                          	this.refs.sonComonentRadio.saySomeThing();//调用子组件refs定义的函数
                          },
		render: function() {
			return (
				<form action="#" onSubmit={this.submitHandle}>
					<input type="text"  defaultValue={this.state.defaultStateInputValue} ref="inputTextRef" /><br/>
					<input type="text" defaultValue="自动获得焦点的refs函数表单 " ref={function(ele){ReactDOM.findDOMNode(ele).focus()}}/>
					<select defaultValue={this.state.defaultStateSelectValue} ref="inputSelectRef">
						<option value="A">A</option>
						<option value="B">B</option>
						<option value="C">C</option>
						<option value="D">D</option>
						<option value="E">E</option>
					</select><br/>
					<p>Radio Button Start!</p>
                                                              <RadioButtonComponent {...this.handleInputRadio} ref="sonComonentRadio"></RadioButtonComponent>
                                                               <CheckedBoxComponent {...this.handleInputCheckBox}></CheckedBoxComponent>
					<textarea name="" id="" cols="30" rows="10"  ref="inputTextareaRef" defaultValue={this.state.defaultStateTextareaValue}></textarea>
					<input type="submit" value="提交" style={{width:"100px",height:"30px",background:"green",color:"white",border:"none"}} />
				</form>
			);
		}
	});
	var RadioButtonComponent=React.createClass({
		saySomeThing:function(){
				alert('我是子组件RadioButtonComponent的函数');
			},
		render:function(){
			return (
					<div style={{border:"1px solid black",maginTop:"10px",height:"50px"}}>
					<input type="radio" name="goodRadio"  onChange={this.props.handleInputRadio} value="radio-a"/>radio-a
					<input type="radio" name="goodRadio"  onChange={this.props.handleInputRadio} value="radio-b" defaultChecked/>radio-b
					<input type="radio" name="goodRadio"  onChange={this.props.handleInputRadio} value="radio-c"/>radio-c
					<input type="radio" name="goodRadio"  onChange={this.props.handleInputRadio} value="radio-d"/>radio-d
					</div>
				)
		}

	});	
	var CheckedBoxComponent=React.createClass({
		render:function(){
			return (
					<div style={{border:"1px solid red",maginTop:"30px",height:"100px"}}>
					<input type="checkbox" onChange={this.props.handleInputCheckBox} name="goodCheckBox" value="checkbox-a"/>checkbox-a
					<input type="checkbox" onChange={this.props.handleInputCheckBox} name="goodCheckBox" value="checkbox-b" />checkbox-b
					<input type="checkbox" onChange={this.props.handleInputCheckBox} name="goodCheckBox" value="checkbox-c"/>checkbox-c
					</div>

				)
		}
	});



		ReactDOM.render(<FromApp></FromApp>,$('#demo')[0]);
	</script>
</head>
<body>
	<div id="demo"></div>
</body>
</html>